# 자바 서블릿 (Java Servlet)

## 1. 서블릿이란?

[기존 내용 유지]

## 2. 서블릿의 특징

[기존 내용 유지]

## 3. 서블릿의 생명주기

서블릿의 생명주기는 서블릿 객체의 생성부터 소멸까지의 전체 과정을 의미합니다. 서블릿 컨테이너(예: Tomcat)가 이 생명주기를 관리합니다.

### 3.1 생명주기 단계

1. **로딩 및 인스턴스 생성**
    - 클라이언트의 첫 요청이 들어오면, 서블릿 컨테이너는 해당 서블릿 클래스를 로드합니다.
    - 서블릿의 인스턴스를 생성합니다. (서블릿당 하나의 인스턴스만 생성됨)

2. **초기화 - init() 메소드**
    - 서블릿 인스턴스가 생성된 후, 컨테이너는 init() 메소드를 호출합니다.
    - init() 메소드는 서블릿의 생애주기 동안 단 한 번만 호출됩니다.
    - 이 단계에서 서블릿의 초기화 작업(예: 데이터베이스 연결 설정)을 수행합니다.

3. **요청 처리 - service() 메소드**
    - 초기화 후, 서블릿은 클라이언트의 요청을 처리할 준비가 됩니다.
    - 각 클라이언트 요청에 대해 서블릿 컨테이너는 별도의 스레드를 생성하고 service() 메소드를 호출합니다.
    - service() 메소드는 요청의 타입(GET, POST 등)에 따라 적절한 메소드(doGet(), doPost() 등)를 호출합니다.
    - service() 메소드는 서블릿의 수명 동안 여러 번 호출될 수 있습니다.

4. **소멸 - destroy() 메소드**
    - 서블릿 컨테이너가 서블릿을 제거하기로 결정하면(예: 애플리케이션 종료 시), destroy() 메소드를 호출합니다.
    - destroy() 메소드는 서블릿의 생애주기 동안 단 한 번만 호출됩니다.
    - 이 단계에서 서블릿이 사용한 자원을 해제하고 최종 작업을 수행합니다.

### 3.2 서블릿 실행 순서 예시

```
서블릿 컨테이너 시작
↓
클라이언트의 첫 요청 도착
↓
서블릿 클래스 로딩
↓
서블릿 인스턴스 생성
↓
init() 메소드 호출
↓
service() 메소드 호출 (요청마다 반복)
↓
애플리케이션 종료 또는 서블릿 언로드 결정
↓
destroy() 메소드 호출
↓
서블릿 인스턴스 소멸
```

### 3.3 주의사항

- init()과 destroy() 메소드는 서블릿의 수명 동안 각각 한 번씩만 호출됩니다.
- service() 메소드는 클라이언트의 각 요청마다 새로운 스레드에서 호출됩니다.
- 서블릿은 멀티스레딩 환경에서 동작하므로, service() 메소드 내의 공유 자원 접근 시 동기화에 주의해야 합니다.
- `<load-on-startup>` 설정을 통해 서블릿을 미리 초기화할 수 있습니다. 이 경우, 첫 요청 전에 서블릿이 로드되고 init() 메소드가 호출됩니다.

## 4. Servlet, GenericServlet, HttpServlet

[기존 내용 유지]

## 5. 서블릿 구현 예제

[기존 내용 유지]

## 6. 서블릿 필터 (Servlet Filter)

[기존 내용 유지]

## 7. 서블릿 리스너 (Servlet Listener)

[기존 내용 유지]

## 8. 서블릿 실행 순서

[기존 내용 유지]

## 9. 결론

서블릿은 Java 기반의 웹 애플리케이션 개발에 있어 중요한 역할을 합니다. 서블릿의 생명주기를 이해하고, 각 단계(초기화, 요청 처리, 소멸)의 특성을 잘 파악하여 활용하면, 효율적이고 안정적인 웹 애플리케이션을 구축할 수 있습니다.

서블릿, 필터, 리스너는 Java 웹 애플리케이션의 핵심 구성 요소입니다. 각 요소의 특성과 실행 순서를 이해하면 더 효과적이고 강력한 웹 애플리케이션을 개발할 수 있습니다.

서블릿은 클라이언트 요청을 처리하는 주요 로직을 담당하고, 필터는 요청과 응답을 전처리/후처리하며, 리스너는 애플리케이션의 다양한 이벤트를 감지하고 반응합니다. 이들의 실행 순서를 잘 이해하고 활용하면, 세션 관리, 보안, 로깅, 성능 최적화 등 다양한 측면에서 웹 애플리케이션의 품질을 향상시킬 수 있습니다.

각 요소의 특성을 이해하고 올바르게 사용하는 것, 그리고 이들의 실행 순서와 상호작용을 파악하는 것이 Java 웹 개발의 핵심입니다.